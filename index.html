<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>正则表达式 | 正则表达式</title>
    <meta name="description" content="Regexp">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/boring-regexp/assets/css/0.styles.71a92f4c.css" as="style"><link rel="preload" href="/boring-regexp/assets/js/app.dddb215f.js" as="script"><link rel="preload" href="/boring-regexp/assets/js/2.e0879a1f.js" as="script"><link rel="preload" href="/boring-regexp/assets/js/4.dbf8c5ee.js" as="script"><link rel="prefetch" href="/boring-regexp/assets/js/3.e57690e3.js"><link rel="prefetch" href="/boring-regexp/assets/js/5.479a5333.js"><link rel="prefetch" href="/boring-regexp/assets/js/6.4f6ea00d.js">
    <link rel="stylesheet" href="/boring-regexp/assets/css/0.styles.71a92f4c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/boring-regexp/" class="home-link router-link-exact-active router-link-active"><!----> <span class="site-name">正则表达式</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/3scarecrow/boring-regexp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/3scarecrow/boring-regexp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>正则表达式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/boring-regexp/#创建regexp对象" class="sidebar-link">创建RegExp对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/boring-regexp/#_1-直接量语法" class="sidebar-link">1 直接量语法</a></li><li class="sidebar-sub-header"><a href="/boring-regexp/#_2-regexp构造函数" class="sidebar-link">2 RegExp构造函数</a></li><li class="sidebar-sub-header"><a href="/boring-regexp/#_3-修饰符" class="sidebar-link">3 修饰符</a></li></ul></li><li><a href="/boring-regexp/#匹配字符" class="sidebar-link">匹配字符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/boring-regexp/#_1-字符类" class="sidebar-link">1 字符类</a></li><li class="sidebar-sub-header"><a href="/boring-regexp/#_2-重复" class="sidebar-link">2 重复</a></li><li class="sidebar-sub-header"><a href="/boring-regexp/#_3-选择" class="sidebar-link">3 选择</a></li><li class="sidebar-sub-header"><a href="/boring-regexp/#_4-分组" class="sidebar-link">4 分组</a></li></ul></li><li><a href="/boring-regexp/#匹配位置" class="sidebar-link">匹配位置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/boring-regexp/#_1-锚字符" class="sidebar-link">1 锚字符</a></li></ul></li><li><a href="/boring-regexp/#实际案例" class="sidebar-link">实际案例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/boring-regexp/#_1-数字的千分位分隔符" class="sidebar-link">1 数字的千分位分隔符</a></li><li class="sidebar-sub-header"><a href="/boring-regexp/#_2-获取url参数" class="sidebar-link">2 获取url参数</a></li><li class="sidebar-sub-header"><a href="/boring-regexp/#_3-获取url-query对象" class="sidebar-link">3 获取url query对象</a></li></ul></li><li><a href="/boring-regexp/#附录" class="sidebar-link">附录</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h1> <p></p><div class="table-of-contents"><ul><li><a href="#创建regexp对象">创建RegExp对象</a><ul><li><a href="#_1-直接量语法">1 直接量语法</a></li><li><a href="#_2-regexp构造函数">2 RegExp构造函数</a></li><li><a href="#_3-修饰符">3 修饰符</a></li></ul></li><li><a href="#匹配字符">匹配字符</a><ul><li><a href="#_1-字符类">1 字符类</a></li><li><a href="#_2-重复">2 重复</a></li><li><a href="#_3-选择">3 选择</a></li><li><a href="#_4-分组">4 分组</a></li></ul></li><li><a href="#匹配位置">匹配位置</a><ul><li><a href="#_1-锚字符">1 锚字符</a></li></ul></li><li><a href="#实际案例">实际案例</a><ul><li><a href="#_1-数字的千分位分隔符">1 数字的千分位分隔符</a></li><li><a href="#_2-获取url参数">2 获取url参数</a></li><li><a href="#_3-获取url-query对象">3 获取url query对象</a></li></ul></li><li><a href="#附录">附录</a></li></ul></div><p></p> <h2 id="创建regexp对象"><a href="#创建regexp对象" class="header-anchor">#</a> 创建RegExp对象</h2> <p>JavaScript的正则表达式是通过 <strong>RegExp</strong> 对象来表示的，而创建 <strong>RegExp</strong> 对象有两种方式：</p> <h3 id="_1-直接量语法"><a href="#_1-直接量语法" class="header-anchor">#</a> 1 直接量语法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token regex">/\d+/</span>
</code></pre></div><h3 id="_2-regexp构造函数"><a href="#_2-regexp构造函数" class="header-anchor">#</a> 2 RegExp构造函数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;\\d+&quot;</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-修饰符"><a href="#_3-修饰符" class="header-anchor">#</a> 3 修饰符</h3> <ul><li><code>i</code>: 匹配不区分大小写</li> <li><code>g</code>: 执行全局匹配，会找到所有的匹配</li> <li><code>m</code>: 多行匹配，其中 <code>^</code> 匹配行开头，<code>$</code> 匹配行结尾</li></ul> <p>通常都可以使用<strong>直接量语法</strong>来创建正则表达式，因为<strong>直接量语法</strong>写法相对简短一些。而通过 <strong>RegExp()</strong> 构造函数创建适合于需要动态创建正则表达式，正则表达式的主体部分是不确定的情况。</p> <p><a href="#_2-%E8%8E%B7%E5%8F%96url%E5%8F%82%E6%95%B0">获取url参数--RegExp构造函数创建动态正则表达式</a></p> <h2 id="匹配字符"><a href="#匹配字符" class="header-anchor">#</a> 匹配字符</h2> <h3 id="_1-字符类"><a href="#_1-字符类" class="header-anchor">#</a> 1 字符类</h3> <p><strong>字符类</strong>表示的是匹配<strong>字符类</strong>中的字符之一，使用<code>[]</code>来定义字符类</p> <p>使用正则的字符类去匹配字符串有时可以减少 <code>||</code> 运算符。</p> <p>例如，判断一个数据的状态是否等于“1”，或等于“2”，或等于“3”的话，就可以使用字符类来实现，当然也可以定义数组来判断</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token string">'1'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token regex">/[123]/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h4 id="_1-1-否定字符类"><a href="#_1-1-否定字符类" class="header-anchor">#</a> 1.1 否定字符类</h4> <p>同时呢还有否定字符类，表示匹配的内容不能包含<strong>字符类</strong>的字符，否定字符类使用<code>[^]</code>来表示</p> <p>使用否定字符类去匹配字符串有时可以减少 <code>&amp;&amp;</code> 运算符。</p> <p>例如，判断一个数据的状态是否不等于“1”，且不等于“2”，且不等于“3”的话，就可以使用字符类来实现，当然也可以定义数组来判断</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token string">'1'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token regex">/[^123]/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h4 id="_1-2-字符类范围"><a href="#_1-2-字符类范围" class="header-anchor">#</a> 1.2 字符类范围</h4> <p>对于字符类的字符较多的情况下可以使用连字符 <code>-</code> 来简写，当然他们必须是连着的字符</p> <p>比如 <code>[abcdef]</code> 可以改为 <code>[a-f]</code></p> <h4 id="_1-3-常用字符类"><a href="#_1-3-常用字符类" class="header-anchor">#</a> 1.3 常用字符类</h4> <p>由于某些字符类非常常用，因此JavaScript的正则表达式语法使用一些特殊字符的转义字符来表示</p> <ul><li><code>\d</code> === <code>[0-9]</code>: 表示数字，是 <strong>digit</strong> 的简写</li> <li><code>\D</code> === <code>[^0-9]</code>: 表示除数字外的任意字符</li> <li><code>\w</code> === <code>[0-9a-zA-Z_]</code>: 表示数字、大小写字母及下划线，是 <strong>word</strong> 的简写</li> <li><code>\W</code> === <code>[^0-9a-zA-Z_]</code>: 表示非单词字符</li> <li><code>\s</code> === <code>[\t\v\n\r\f]</code>: 表示空白符（包括空格、水平制表符、垂直制表符、换行符、回车符或换页符），是 <strong>space character</strong> 的简写</li> <li><code>\S</code> === <code>[^\t\v\n\r\f]</code>: 非空白符</li> <li><code>.</code> === <code>[^\n\r\u2028\u2029]</code>: 表示除换行符、回车符、行分隔符和段分隔符外的任意字符</li></ul> <p>若想匹配任意字符，可使用 <code>[\d\D]</code>、<code>[\w\W]</code>、<code>[\s\S]</code>或<code>[^]</code> 来匹配</p> <h3 id="_2-重复"><a href="#_2-重复" class="header-anchor">#</a> 2 重复</h3> <h4 id="_2-1-重复字符表示"><a href="#_2-1-重复字符表示" class="header-anchor">#</a> 2.1 重复字符表示</h4> <ul><li><p><code>{n,m}</code> 表示匹配字符最少n次，最多m次</p></li> <li><p><code>{n}</code> 表示匹配字符n次</p></li> <li><p><code>{n,}</code> 表示匹配字符n次或更多次</p></li> <li><p><code>?</code> === <code>{0,1}</code> 表示匹配字符0次或1次</p></li> <li><p><code>+</code> === <code>{1,}</code> 表示匹配字符1次或多次</p></li> <li><p><code>*</code> === <code>{0,}</code> 表示匹配字符0次或多次</p></li></ul> <h4 id="_2-2-非贪婪匹配"><a href="#_2-2-非贪婪匹配" class="header-anchor">#</a> 2.2 非贪婪匹配</h4> <p>上面的匹配重复字符都是贪婪匹配，他们会尽可能多地匹配，比如 <code>/\d{2,3}/g</code> 就会尽可能的匹配3个字符</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'123 3454 789'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\d{2,3}/g</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;123&quot;, &quot;345&quot;, &quot;789&quot;]</span>
</code></pre></div><p>而非贪婪匹配则是在重复字符后面加上 <code>?</code> 实现的，比如 <code>{2,3}?</code>、<code>*?</code> 等等</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'123 3454 789'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\d{2,3}?/g</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;12&quot;, &quot;34&quot;, &quot;54&quot;, &quot;78&quot;]</span>
</code></pre></div> <h3 id="_3-选择"><a href="#_3-选择" class="header-anchor">#</a> 3 选择</h3> <p>使用字符 <code>|</code> 来分隔可选择的字符，也就是 “或” 的意思。例如 <code>/jpg|png|jpng/</code> 即可匹配 &quot;jpg&quot;，也可匹配&quot;png&quot;，还可匹配 &quot;jpng&quot; 字符串</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><strong>注意</strong> 选择项的尝试匹配次序是从左到右，也就是说如果左边的选择项匹配了，就会忽略右边的选择项，即使右边的选择项更匹配。例如当正则表达式 <code>/java|javaScript/</code> 去匹配字符串 &quot;javaScript&quot; 时，它只能匹配第一个字符，即 &quot;java&quot;</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'javaScript'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/java|javaScript/g</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;java&quot;]</span>
</code></pre></div><p>若想尽可能的更好的匹配，可将更好的匹配字符放在左边</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'javaScript'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/javaScript|java&quot;/g</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;javaScript&quot;]</span>
</code></pre></div><h3 id="_4-分组"><a href="#_4-分组" class="header-anchor">#</a> 4 分组</h3> <p>分组是通过 <code>()</code> 来实现的，而在正则中括号有三个作用：<strong>组合</strong>、<strong>引用分组</strong>和<strong>反向引用</strong></p> <h4 id="_4-1-组合"><a href="#_4-1-组合" class="header-anchor">#</a> 4.1 组合</h4> <p>用括号将单独的项<strong>组合</strong>成子表达式，以便可以像处理一个独立的单元那样用 <code>|</code>、<code>*</code>、<code>?</code>、<code>+</code> 等来对单元内的项进行处理。</p> <p>例如如果想匹配一至多个 &quot;ab&quot; 这样的组合项，需要使用 <code>/(ab)+/</code></p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ababab'</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/ab+/g</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;ab&quot;, &quot;ab&quot;, &quot;ab&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ababab'</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/(ab)+/g</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;ababab&quot;]</span>
</code></pre></div><h4 id="_4-2-引用分组"><a href="#_4-2-引用分组" class="header-anchor">#</a> 4.2 引用分组</h4> <p>引用分组指的是我们可以引用 <code>()</code> 内的子表达式匹配到的文本，以此来实现正则表达式的检索与替换操作</p> <h5 id="_4-2-1-替换"><a href="#_4-2-1-替换" class="header-anchor">#</a> 4.2.1 替换</h5> <p>引用分组经常用于替换操作中，当字符串的 <code>replace</code> 方法的第一个参数为正则表达式时，第二个参数可以通过 <code>$1</code>、<code>$2</code>、<code>...</code>、<code>$9</code> 来引用第一个参数的正则表达式的分组。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'javascript'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(script)/</span><span class="token punctuation">,</span> <span class="token string">'-$1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// java-script</span>
</code></pre></div><p>其中，<code>replace</code> 的第二个参数还可以是一个函数</p> <p>具体实例可参考 <a href="#_3-%E8%8E%B7%E5%8F%96url-query%E5%AF%B9%E8%B1%A1">获取url-query对象</a></p> <h5 id="_4-2-2-数据引用"><a href="#_4-2-2-数据引用" class="header-anchor">#</a> 4.2.2 数据引用</h5> <p>string 的 <code>match</code> 和 regexp 的 <code>exec</code> 也可在匹配的结果中引用分组匹配的文本</p> <p>例如，提取日期的年月日</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2020'</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [&quot;2020-03-30&quot;, &quot;2020&quot;, &quot;03&quot;, &quot;30&quot;, index: 0, input: &quot;2020-03-30&quot;, groups: undefined]</span>
</code></pre></div><p>字符串的 <code>match</code> 方法返回一个数组，其中第一个元素是整体匹配结果，然后是各个引用分组匹配的结果。倘若正则表达式有修饰符 <code>g</code>，则返回的数组是各个引用分组匹配的结果。正则对象的 <code>exec</code> 方法与 字符串的 <code>match</code> 匹配的结果一样</p> <h4 id="_4-3-反向引用"><a href="#_4-3-反向引用" class="header-anchor">#</a> 4.3 反向引用</h4> <p><strong>反向引用</strong>指的是可以在同一正则表达式的后部引用前面的子表达式（也就是圆括号内的子表达式）匹配到的字符串，是通过在 <code>\</code> 后加一位或多位数字来实现的。其中数字对应圆括号的子表达式在正则表达式中的位置</p> <p>例如 <code>\1</code> 表示正则表达式中从左到右第1个圆括号的子表达式匹配到的文本，以此类推，<code>\9</code> 表示第9个圆括号的子表达式匹配到的文本</p> <p>以下例子用来测试日期格式是否正确，其中正则表达式的 \1 可以引用前面的括号匹配到的文本来保证日期的连接符是一致的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{4}(-|\/|\.)\d{2}\1\d{2}/</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;2020-03-30&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;2020/03/30&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;2020.03.30&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;2020-03/30&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div> <h2 id="匹配位置"><a href="#匹配位置" class="header-anchor">#</a> 匹配位置</h2> <p>位置匹配是指匹配字符之间的位置，而不是实际的字符</p> <p><img src="/boring-regexp/assets/img/position.4671619b.svg" alt="位置"></p> <h3 id="_1-锚字符"><a href="#_1-锚字符" class="header-anchor">#</a> 1 锚字符</h3> <p>在正则表达式中匹配位置的字符由于可以匹配字符串的特定位置，因此也被称为锚字符。</p> <ul><li><code>^</code> : 匹配开头，在多行匹配中匹配行开头</li> <li><code>$</code> : 匹配结尾，在多行匹配中匹配行结尾</li> <li><code>\b</code> : 匹配单词的边界，具体就是 <code>\w</code> 和 <code>\W</code> 、<code>\w</code> 和 <code>^</code> 以及 <code>\w</code> 和 <code>$</code> 之间的位置</li> <li><code>\B</code> : 匹配非单词边界，也就是除了 <code>\b</code> 匹配的位置外的所有位置</li> <li><code>(?:p)</code> : 正向先行断言，要求接下来的字符要与 <code>p</code> 匹配，可以理解为模式 <code>p</code> 前面的位置</li> <li><code>(?!p)</code> : 反向先行断言，要求接下来的字符不与 <code>p</code> 匹配</li></ul> <p>所有匹配的位置都是可以被替换的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'hello world'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^|$/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// #hello world#</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\b/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// #hello# #world#</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\B/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// h#e#l#l#o w#o#r#l#d</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?=llo)/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// he#llo world</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?!=llo)/g</span><span class="token punctuation">,</span> <span class="token string">'#'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// #h#el#l#o# #w#o#r#l#d#</span>
</code></pre></div><h2 id="实际案例"><a href="#实际案例" class="header-anchor">#</a> 实际案例</h2> <h3 id="_1-数字的千分位分隔符"><a href="#_1-数字的千分位分隔符" class="header-anchor">#</a> 1 数字的千分位分隔符</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">'1234567.12'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?=(\d{3})+\b)/g</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token comment">// 1,234,567.12</span>
</code></pre></div><ul><li><code>(\d{3})</code> 表示匹配3个数字。例如 <code>123</code>，<code>456</code></li> <li><code>(\d{3}+)</code> 表示匹配的数字个数是3的整数倍。例如 <code>123456</code>，<code>456</code></li> <li><code>(\d{3}+\b)</code> 表示匹配的数字个数是3的整数倍且后面是单词边界（若有小数点，小数点后面的数字不匹配）。例如 <code>234567.</code>，<code>567.</code></li> <li><code>(?=(\d{3}+\b))</code> 表示匹配的数字个数是3的整数倍且后面单词边界前面的位置。例如 <code>234567.</code> 前面的位置，<code>567.</code>前面的位置</li></ul> <p>最后只要将匹配的位置替换为 <code>,</code> 即可</p> <p>但是如果整数的个数是3的倍数时就会有点问题</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">'123456789.12'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?=(\d{3})+\b)/g</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token comment">// ,123,456,789.12</span>
</code></pre></div><p>说明匹配到的位置不能是开头，所以使用 <code>(?!^)</code> 来限制</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">'123456789.12'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(?!^)(?=(\d{3})+\b)/g</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token comment">// 123,456,789.12</span>
</code></pre></div><p>也可以用 <code>\B</code> 来代替 <code>(?!^)</code> ，因为 <code>\B</code> 也可以匹配非开头位置</p> <p>所以最终的正则表达式可改为:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">'123456789.12'</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\B(?=(\d{3})+\b)/g</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token comment">// 123,456,789.12</span>
</code></pre></div><p>可以看看可视图的正则</p> <p><img src="/boring-regexp/assets/img/thousands.988b45fa.png" alt="千分位正则可视图"></p> <h3 id="_2-获取url参数"><a href="#_2-获取url参数" class="header-anchor">#</a> 2 获取url参数</h3> <p>使用 <code>RegExp()</code> 构造函数构建动态正则表达式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getQueryParam</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'(^|&amp;)'</span> <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">'=([^&amp;]*)(&amp;|$)'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span>  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>

<span class="token function">getQueryParam</span><span class="token punctuation">(</span><span class="token string">'userid'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>(^|&amp;)</code> 匹配参数字符串的开头或 <code>&amp;</code> 字符</li> <li><code>([^&amp;]*)</code> 匹配非 <code>&amp;</code> 的多个任意字符，此处匹配的是 <code>key</code> 对应的值，它会出现在匹配结果的第三项</li> <li><code>(&amp;|$)</code> 匹配 <code>&amp;</code> 字符或结尾</li></ul> <h3 id="_3-获取url-query对象"><a href="#_3-获取url-query对象" class="header-anchor">#</a> 3 获取url query对象</h3> <p>若想获取所有的URL参数对象可使用以下方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/(^|&amp;)([^=]*)=([^&amp;]*)/ig</span>
  <span class="token keyword">var</span> string <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> p1<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> p4</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="附录"><a href="#附录" class="header-anchor">#</a> 附录</h2> <ul><li><a href="https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24" target="_blank" rel="noopener noreferrer">正则可视化工具<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://regex101.com/" target="_blank" rel="noopener noreferrer">正则在线测试工具(regex101)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/22/2020, 5:39:35 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/boring-regexp/assets/js/app.dddb215f.js" defer></script><script src="/boring-regexp/assets/js/2.e0879a1f.js" defer></script><script src="/boring-regexp/assets/js/4.dbf8c5ee.js" defer></script>
  </body>
</html>
